# Neovim 快捷键快速参考

## 文件操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+s` | 保存所有文件 | 类似 VSCode 的 Save All，在普通/插入/可视模式都可用 |
| `空格+w` | 保存当前文件 | 只保存当前编辑的文件 |
| `Ctrl+w` | 关闭当前 buffer | 类似 VSCode 的关闭标签页 |
| `空格+bc` | 关闭当前 buffer | 替代方案 |

## 文件查找

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+p` | 查找文件 | 搜索项目中的所有文件 |
| `Ctrl+f` | 全局搜索 | 在项目中搜索文本内容 |
| `Ctrl+e` | 最近文件列表 | 显示最近打开的文件 |
| `空格+br` | 最近文件列表 | 同上，备选快捷键 |
| `Shift+Ctrl+t` | 恢复最近关闭的文件 | 直接打开，不显示列表（类似 VSCode） |

## Buffer 管理

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `空格+bn` | 下一个 buffer | 切换到下一个标签页 |
| `空格+bp` | 上一个 buffer | 切换到上一个标签页 |
| `Alt+.` | 下一个 buffer | 快速切换 |
| `Alt+,` | 上一个 buffer | 快速切换 |
| `Shift+Alt+t` | 关闭其他所有 buffer | 只保留当前文件，关闭其他代码文件 |

## 窗口操作

⚠️ **注意**：由于 `Ctrl+w` 被重新映射为关闭 buffer，窗口操作改用 `空格+w` 开头

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `空格+wv` | 垂直分屏 | 左右分割窗口 |
| `空格+wh` | 水平分屏 | 上下分割窗口 |
| `空格+wc` | 关闭当前窗口 | 关闭分屏窗口 |
| `空格+wo` | 关闭其他窗口 | 只保留当前窗口 |
| `Ctrl+h/j/k/l` | 窗口导航 | 在分屏窗口间移动 |
| `空格+w=` | 平均窗口大小 | 所有窗口大小相同 |
| `空格+w>` | 增加窗口宽度 | 增加 5 列 |
| `空格+w<` | 减少窗口宽度 | 减少 5 列 |
| `空格+w+` | 增加窗口高度 | 增加 5 行 |
| `空格+w-` | 减少窗口高度 | 减少 5 行 |

## 文件树

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+n` | 打开文件树 | 显示项目文件树 |
| `空格+e` | 切换文件树 | 打开/关闭文件树 |
| `空格+bf` | Buffer 树 | 浮动窗口显示 buffer 列表 |

## LSP 和诊断

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `gd` | 跳转到定义 | Go to definition |
| `K` | 显示文档 | 显示函数/变量文档 |
| `gr` | 查找引用 | Find references |
| `空格+rn` | 重命名 | 重命名符号 |
| `空格+ca` | 代码操作 | 显示可用的代码修复 |
| `[d` | 上一个诊断 | 跳转到上一个错误/警告 |
| `]d` | 下一个诊断 | 跳转到下一个错误/警告 |
| `空格+xx` | 打开问题面板 | 显示所有诊断（类似 VSCode Problems） |
| `空格+xw` | 当前文件诊断 | 只显示当前文件的诊断 |

## Git 操作

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `]g` | 下一个更改 | 跳转到下一个 git hunk |
| `[g` | 上一个更改 | 跳转到上一个 git hunk |
| `空格+gs` | 暂存更改 | Stage hunk |
| `空格+gu` | 撤销暂存 | Undo stage |
| `空格+gr` | 重置更改 | Reset hunk |
| `空格+gp` | 预览更改 | Preview hunk |
| `空格+gb` | 显示 blame | 显示当前行的 git blame |
| `空格+gd` | 显示差异 | Diff this |

## 调试 (DAP)

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `空格+db` | 切换断点 | Toggle breakpoint |
| `空格+dc` | 开始/继续调试 | Start/Continue |
| `空格+di` | 单步进入 | Step into |
| `空格+do` | 单步跳过 | Step over |
| `空格+du` | 单步跳出 | Step out |
| `空格+ds` | 停止调试 | Stop debugging |

## 终端

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `空格+t` | 打开终端 | 打开集成终端 |

## 其他

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `空格+nh` | 清除搜索高亮 | 清除搜索结果的高亮显示 |
| `空格+f` | 格式化代码 | 格式化当前文件 |

## 终端配置注意事项

### Ctrl+s 可能被终端占用

某些终端中 `Ctrl+s` 会暂停输出（XOFF），如果不工作：

```bash
# 在 ~/.bashrc 或 ~/.zshrc 中添加
stty -ixon
```

### Ctrl+w 在终端中的行为

- 在 Neovim 中：关闭当前 buffer（我们的配置）
- 在终端命令行：删除前一个单词（终端默认）

## 快速记忆

### VSCode 用户
- `Ctrl+s` = Save All ✅
- `Ctrl+w` = Close Tab ✅
- `Ctrl+p` = Quick Open ✅
- `Shift+Ctrl+t` = Reopen Closed Editor ✅
- `Ctrl+f` = Find in Files ✅

### Leader 键（空格键）
- `空格+w*` = 窗口操作
- `空格+b*` = Buffer 操作
- `空格+g*` = Git 操作
- `空格+d*` = 调试操作
- `空格+x*` = 诊断操作

